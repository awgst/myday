$(document).ready(function(){$('#account').on('click',function(){let content = $('#contentContainer').html();$('#contentContainer').html(`<i class="fa fa-spinner fa-pulse text-muted" style="font-size: 30px;"></i>`);$.ajax({type: "GET",url: accountSettingRoute,async: false,success:function(response){$('.item.active.extra-light-blue').removeClass('active extra-light-blue');$('.form-item.active.extra-light-blue').removeClass('active extra-light-blue');$('#contentContainer').html(response);$('#contentContainer').removeAttr('style');},error:function(response){$('#contentContainer').html(content);toastr["error"]('Oops, Sorry something went wrong.',"ERROR")},complete:function(){$('.popover').removeClass('show');}});});});$(document).ready(function(){$(document).on('submit','#formAccount',function(e){e.preventDefault();$(this).find(`[type="submit"]`).prop('disabled',true);$(this).find(`[type="submit"]`).html(`<i class="fa fa-spinner fa-pulse"></i>`);$.ajax({type:"PUT",url:$(this).attr('action'),data:$(this).serialize(),success:function(response){$('.text-danger').html('');uploadFile($(`[name="profile_picture"]`),accountUploadRoute)},error:function(response){$('.text-danger').html('');if(response.status==422){let errors=response.responseJSON.errors;for(const key in errors){if(Object.hasOwnProperty.call(errors,key)){const element=errors[key];$(`[data-validation="${ key }"]`).text(element)}}}if(response.status==500){toastr["error"](response.responseJSON.message,"ERROR")}}})});$(document).change('.image-upload',function(input){let file=input.target.files;let reader=new FileReader();reader.onload=function(e){$('.image-account').find('img').attr('src',e.target.result)};reader.readAsDataURL(file[0])})});function uploadFile(selector,url){let data=new FormData();data.append('file',selector.prop('files')[0]);$.ajax({type:"POST",url:url,data:data,contentType:false,cache:false,processData:false,success:function(response){let profile=response.profile_picture;$('#miniProfilePicture').attr('src',profile)},error:function(reponse){toastr['error']("Upload failed","ERROR")},complete:function(){$('.btn-submit-account').removeAttr('disabled');$('.btn-submit-account').html('Save')}})}